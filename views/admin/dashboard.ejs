<%- include('../partials/header', { title: 'لوحة التحكم', user: user }) %>

<div class="container admin-container">
    <div class="admin-header">
        <h1>لوحة التحكم</h1>
        <p>مرحباً <%= user.name %> - إدارة شاملة للمطعم</p>
    </div>

    <div class="admin-nav">
        <div class="nav-card">
            <div class="nav-card-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                    <path d="M3 9h18M3 15h18M9 3v18"/>
                </svg>
            </div>
            <div class="nav-card-content">
                <h3>إدارة الفئات</h3>
                <p>إضافة وتعديل فئات المنتجات</p>
                <a href="#categories" class="nav-card-link">إدارة الفئات</a>
            </div>
        </div>

        <div class="nav-card">
            <div class="nav-card-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <circle cx="9" cy="21" r="1"/>
                    <circle cx="20" cy="21" r="1"/>
                    <path d="M1 1h4l2.68 12.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                </svg>
            </div>
            <div class="nav-card-content">
                <h3>إدارة المنتجات</h3>
                <p>إضافة وتعديل المنتجات</p>
                <a href="/admin/items" class="nav-card-link">إدارة المنتجات</a>
            </div>
        </div>
    </div>

    <section class="admin-section" id="categories">
        <div class="section-header">
            <h2>إدارة الفئات</h2>
        </div>

        <div class="form-container">
            <form action="/category/add" method="POST" class="admin-form">
                <div class="form-group">
                    <label for="category-name">اسم الفئة</label>
                    <input type="text" id="category-name" name="name" placeholder="مثال: مشروبات غازية" required>
                </div>
                <button type="submit" class="btn btn-primary">إضافة فئة جديدة</button>
            </form>
        </div>

        <div class="items-list">
            <h3>الفئات الحالية</h3>
            <% if (categories.length === 0) { %>
                <p class="empty-message">لا توجد فئات مضافة حتى الآن</p>
            <% } else { %>
                <% categories.forEach(category => { %>
                    <div class="list-item">
                        <form action="/category/edit/<%= category._id %>" method="POST" class="edit-form">
                            <div class="form-group">
                                <input type="text" name="name" value="<%= category.name %>" required>
                            </div>
                            <div class="item-actions">
                                <button type="submit" class="btn btn-small btn-secondary">حفظ التغييرات</button>
                        </form>
                        <form action="/category/delete/<%= category._id %>" method="POST" class="delete-form" onsubmit="return confirm('هل أنت متأكد من حذف هذه الفئة؟ سيتم حذف جميع المنتجات التابعة لها')">
                                <button type="submit" class="btn btn-small btn-danger">حذف</button>
                            </form>
                            </div>
                    </div>
                <% }) %>
            <% } %>
        </div>
    </section>
</div>

<%- include('../partials/footer') %>
